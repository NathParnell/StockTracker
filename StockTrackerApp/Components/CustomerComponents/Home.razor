@using StockTrackerCommon.Models;

<div class="pageContainer">
    <h1>Available Suppliers</h1>
    <div class="suppliersContainer">
        @foreach (Supplier supplier in _suppliers)
        {
            <div class="supplier">
                <div class="supplierName">
                    <h3>Supplier: @supplier.CompanyName</h3>
                    <span class="oi oi-chat" style="color: #322521; cursor:pointer; margin-left:2rem;" @onclick="() => NavigateNewMessage(supplier.SupplierId)" title="Message"></span>
                </div>
                <button type="button" @onclick="() => ManageSupplierSubscription(supplier.SupplierId)">
                    @if (_customerService.CurrentUser.SupplierSubscriptions.Contains(supplier.SupplierId))
                    {
                        <p>Unsubscribe from supplier notifications</p>
                    }
                    else
                    {
                        <p>Subscribe to supplier notifications</p>
                    }
                </button>
                <div class="supplierDetails">
                    <p>Email: @supplier.Email</p>
                    <p>Telephone Number: @supplier.TelephoneNumber</p>
                    <p>Based in: @supplier.City</p>
                </div>
                <div class="supplierNavigateButton">
                    <button type="button" @onclick="() => NavigateToViewSupplierPage(supplier.SupplierId)">View Products</button>
                </div>
                
            </div>
        }
    </div>
</div>